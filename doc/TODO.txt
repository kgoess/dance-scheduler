

Alan W.'s suggestion 2022-05-17

I'd like to suggest that in the new schema we add a way to, per entry,  put the
formatted output desired into one column and then just dump it out in
dancefinder or specialevents.  That would give us maximum flexibility for this
kind of request.  We could either add a column that does that, if ticked, or
just go by there being any value in that column.)


Eric B. writes 2022-06-25
I'd like to split the "performer_url" into "leader_url" and "band_url" because
the usual case is that they are different. I'd also like to add "leader_photo"
and "band_photo" which would be the URL of a nice photo for each, if they
exist. We should look at all the current abuses of the "band" field and try to
get them moved to separate fields.

county for series/event? link to covid policies?

should events.start_time be not-null? what about camps?

phase I:
 DONE events just needs a short desc
 DONE series needs a short desc for the top of the page, and an optional long desc
   for the body, see sf contra currently
 DONE series needs a sidebar field (big textbox)
 DONE location also needs a sidebar field for the series pages and for the
   /directions/ page (ultimately)
 DONE dance cancelled
 NOPE make start/end times raw text, just "times" like "dance is from 6 to 7 with
   food in the middle"
 DONE add description to venue list, not just the three-letter thing
 DONE event.name on the UI use event.name if present otherwise generate one
 DONE add leader_url and band_url to bands (performer_url isn't currently used
   anywhere)
 DONE add photo_url to talent
 DONE set up in apache
 DONE- merge to master
 DONE work out authentication
 DO MANUALLY AT SWITCHOVER- sort out abuse of the 'band' column
 DONE find other TODOs/FIXMEs in the code
 DONE need an event url for display in https://bacds.org/scripts/dancefinder.pl,
   called out by Alan's change 904dd65c6e832 in
   git:/var/lib/git/bacds.org-scripts/
 DONE add a "pricing" textbox to events
 DONE add "manager name" to series
 DONE fill in TOS, privacy urls from google auth
   for their page "Confirm you want to sign in to "bacds.org" as Bob
   bob@foo.com. To create your account, Google will share your name, email
   address, and profile picture with bacds.org. See bacds.org's "privacy policy"
   and "terms of service""
 DONE need CLI tool for password management
 DONE fill in the 401 unauthorized error page 401.html
 DONE care that they're logged in
 DONE hook up the bacds login form
 DONE CLI utility to manage username/pw
 FIXED?- is_superuser is saying "yes" even when it's not
 DONE add handler for the 403 "you don't have permission" and let them continue
 NO, SUPERUSER IS FINE need permissions to edit a standalone event without a series
 DONE make the UI clear which fields are required and which are optional
 DONE add "help" buttons to the UI?
 DONE add "directions" field to venues
 DONE new bug: shouldn't the BOOL colmns like is_canceled, is_superuser and
    is_template be NOT NULL? But that raises problems with the checkbox in the web
    UI, because unchecked checkboxes aren't sent to the server
    and because of that you can't un-cancel a dance, or un-superuser a programmer
 DONE get the ld+json for the individual event pages
 DONE make a beta test cookie getter/setter
 DONE the event.is_canceled control isn't getting the Yes/No behavior from
    displayItemRow's checkbox-item logic
 DONE WELL GOOD ENOUGH ANYWAY talk about "sidebar", see a47b7c918239
    -- create a sidebar options table that links to events, to allow including and sorting options as desired

 - find docs on google/facebook to change them from redirects to something else
 - then change our js to pop up a modal and follow that new flow
 - function handleError(err) * TODO this should be added to all the requests
 - adding a dup caller just throws a server error--be more helpful
       Route exception: DBIx::Class::Storage::DBI::_dbh_execute(): DBI Exception:
       DBD::mysql::st execute failed: Duplicate entry 'Bruce Herbold' for key
       'caller_id_idx' [for Statement "INSERT INTO callers
 - better styling for dancefinder results page? at least a "back to search"
   link? and for the search page?
 - some of the series pages, are broke--display text above or beside sidebar?

 - work out that is_deleted field--it shouldn't be exposed (there should be a
   'delete' button), and it should do something on the backend
FIXED BUT HAS DISPLAY BUG WITH EVENTS, SYNTHETIC FIELD--JUST GET THE ROW BEING DISPLAYED IN THE DROPDOWN INSTEAD
 - new question: why is short desc a required field? it seems to be not needed for
    a regular series dance? if there's a reason, then add a help button.
 - BUG! if I manually add OSEGB band with members, it doesn't seem to add the members
    to an existing event?
 - check out the short_desc in the template for https://bacds.org/series/english/berkeley_sat/, is that right?
 - what about the <style> tags in upcoming-events.tt? good enough or what?
 - make sure the serieslister is getting all the related stuff in one query
 - fix it so you can develop on a copy of the production database
 - I suspect we want a long_desc in the events table
 - want audit logs!

phase II:

 - need a way to see old events
 - handle server errors better than an alert box
 - make /directions/content.html a dynamic page
 - the listbox showing existing things would be completely retooled, with
   filtering and who knows
 - CALDAV output
 - add transactions in functions like bacds::Scheduler::Model->post_row and
   ->put_row that update multiple tables
 - add spinner for login buttons, see recommendation here:
    https://developers.facebook.com/docs/facebook-login/web/login-button/
 - add spinner for other document loading stuff in the main page?
 - create "pricing" table that maps to events
 - refactor all that repetition in the templates
