<!DOCTYPE html>
<html>
<head>
<!-- scheduler-page.tt wrapper -->
<%# This scheduler-page.tt wrapper is for any general-purpose user-displayed
      page generated by the dance-scheduler app, like the series pages, or the
      dancefinder, or the archive calendars

      The caller needs to pass in:
          page_title
          season (winter|spring|summer|fall)
          breadcrumbs (optional)

    See scheduler-pages.css for an ascii diagram of the layout.
-%>
  <meta name="viewport" content="width=device-width" />
  <title>
    <% page_title %>
  </title>
  <link rel="stylesheet" href="https://bacds.org/css/cd-carousel.css" />
  <style>
  :root {
      <% IF season == "winter" %>
          --header-color: #bbbbbb;
          --header-background-color: #0000ff;
          --nav-background: #bbddff;
          --seasoned-text: #0000ff;
          --special-event-border: #0000ff;
       <% ELSIF season == "spring" %>
          --header-color: #000000;
          --header-background-color: #008822;
          --nav-background: #ddffdd;
          --seasoned-text: #006622;
          --special-event-border: #009900;
       <% ELSIF season == "summer" %>
          --header-color: #000000;
          --header-background-color: #c24f4f;
          --nav-background: #ffdddd;
          --seasoned-text: #aa1111;
          --special-event-border: #bb3333;
       <% ELSE %><%# season == "fall" %>
          --header-color: #000000;
          --header-background-color: #bb5820;
          --nav-background: #e4dcc3;
          --seasoned-text: #953100;
          --special-event-border: #b55100;
       <% END %>
  }
  </style>
  <link rel="stylesheet" title="base" type="text/css" href="<% request.uri_base %>/css/scheduler-pages.css" />
</head>
<body>
  <!-- ***************************** -->
  <!-- header -->
  <!-- ***************************** -->
  <header>
    <div class="masthead">
        <div class="masthead-logo">
          <a href="/">
            <img src="https://bacds.org/graphics/bacdsweblogosmall.gif" alt="BACDS Logo" height="108" width="81" class="logo">
          </a>
        </div>
        <div>
          <div class="masthead-title">
            <a href="/">
              The Bay Area Country Dance Society
            </a>
          </div>
          <div class="breadcrumbs">
            <%- IF breadcrumbs %>
                <span class="desktop-only">This page is <a href="/">www.bacds.org</a> &gt; </span>
                <%- FOREACH crumb IN breadcrumbs %>
                    <a href="<% crumb.href %><% IF loop.last %>#top<% END %>"><% crumb.label %></a>
                    <%- IF ! loop.last %> &gt;<% END %>
                <% END %>
            <% END %>
          </div>
        </div>
      </a>
    </div>

    <section id="promo-buttons">
      <div class="promo-button" data-promo-id="carousel">
        Buy Our CDs
      </div>
      <div class="promo-button">
        <a href="/donate/" title="Make a tax-deductible donation to BACDS">Donate!</a>
      </div>
      <div class="promo-button" data-promo-id="search">
        Search
      </div>
      <div class="promo-button">
        <a href="/COVID/">COVID Safety Info</a>
      </div>
    </section>

    <!-- needs css/cd-carousel.css loaded to work -->
    <!-- https://www.cssscript.com/pure-css3-3d-cover-flow-effect/ -->
    <div id="carousel" class="promo hidden cd-carousel-bg"> <!-- like <details> -->
      <ul id="cd-carousel">
        <li>
          <a href="/events/SOTG/index.html" title="Purchase the CD &quot;Swinging On The Gate&quot;">Swinging On The Gate</a>
        </li>
        <li class="highlighted">
          <a href="/events/WaltzCD/index.html" title="Purchase the CD &quot;Waltzes Before Breakfast&quot;">Waltzes Before Breakfast</a>
        </li>
        <li>
          <a href="/events/WBB2/index.html" title="Purchase the CD &quot;More Waltzes Before Breakfast&quot;">More Waltzes Before Breakfast</a>
        </li>
        <li>
          <a href="/events/WBB3/index.html" title="Purchase the new CD &quot;Chocolates Before Breakfast&quot;" >Chocolates Before Breakfast</a>
        </li>
        <li>
          <a href="/odd-sundays" title="Download tunes by the Odd Sundays Garage Band" >Odd Sundays Garage Band</a>
        </li>
      </ul>
    </div>
    <div id="search" class="hidden promo">
      <script>
        (function() {
        // I set these up here: https://cse.google.com/cse/all --kg 20170205
        // per the css settings in /var/www/bacds.org/public_html/css/*-base.css
        // which are managed by the script in /var/www/bacds.org/public_html/scripts/css-rotate.sh
        // which is a cron job under the apache account
        var searchbox_for_season = [
          '004458889210186432126:se1gimrcxs0', // winter
          '004458889210186432126:km9gtrwnpya', // spring
          '004458889210186432126:i7zptaustsu', // summer
          '004458889210186432126:wv_nqlzpbv4'  // fall
          ];
          var today = new Date();
          var season = Math.trunc((today.getMonth()/3));

          var cx = searchbox_for_season[season];

          var gcse = document.createElement('script');
          gcse.type = 'text/javascript';
          gcse.async = true;
          gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
          var s = document.getElementsByTagName('script')[0];
          s.parentNode.insertBefore(gcse, s);
        })();
      </script>
      <div class="google-searchbox-container">
      <div class="google-searchbox">
        <!-- <div class="google-searchbox-caption">
        Search for:
        </div>
        -->
        <gcse:search></gcse:search>
      </div>
    </div>
  </header>

  <div class="navbar-and-body">

    <!-- ***************************** -->
    <!-- nav -->
    <!-- ***************************** -->
    <div class="collapsible-section nav"> <!-- like <details> -->
      <div class="collapsible-title collapsible-closed nav">Navigation Links</div> <!-- like <summary> -->
      <div class="collapsible-body collapsible-body-hidden"> <!-- the hideable part of <details> -->
        <nav>
          <div class="navsection">
            <div class="navitem">
              <a href="/">Home</a>
            </div>
          </div>
          <div class="navsection">
            <div class="navitem">
              <a href="/membership/">Become a Member!</a>
            </div>
          </div>
          <div class="navsection">
            <div class="navitem">
              <a href="/COVID/">Covid dance safety guidelines</a>
            </div>
          </div>
          <div class="navsection">
              Dance Series:
            <div class="navsubsection current-navsection">
              <div class="navitem">
                <a href="/series/contra">Contra and Square Dances</a>
              </div>
              <div class="navitem">
                <a href="/series/english">English Country Dances</a>
              </div>
              <!--
              <div class="navitem">
                <a href="/series/ceilidh">English Ceilidh</a>
              </div>
              <div class="navitem">
                <a href="/series/woodshed">"Woodshed" Dances</a>
              </div>
              -->
              <div class="navitem">
                <a href="/series/community">Other Community Dances</a>
              </div>
            </div><!-- end navsubsection -->
            <div class="navitem">
              <a href="/events/">Special Events and Projects</a>
            </div>
            <div class="navitem">
              <a href="/camps/">Dance Camps &amp; Weekends</a>
            </div>
            <div class="navitem">
              <a href="/teams/">Performance Teams</a>
            </div>
          </div> <!-- end navsection -->
          <div class="navsection">
            All Upcoming Dances:
            <div class="navsubsection">
              <div class="navitem">
                <a href="/dance-scheduler/dancefinder-results?style-name=CONTRA">Contra Dances </a><br />
              </div>
              <div class="navitem">
                <a href="/dance-scheduler/dancefinder-results?style-name=ENGLISH">English Dances </a><br />
              </div>
              <div class="navitem">
                <a href="/dance-scheduler/dancefinder-results">Everything</a><br />
              </div>
            </div>
          </div>
          <div class="navsection">
            <div class="navitem">
              <a href="/links/">Dance/Music Links</a>
            </div>
            <div class="navitem">
              <a href="/email/">E-mail discussion and announcement lists</a><br />
            </div>
            <div class="navitem">
              <a href="/organization/">Board/Committees</a>
            </div>
          </div> <!-- end navsection -->
          <div class="navsection">
            <div class="navitem">
              <a href="/dancefinder/">Dancefinder - search</a>
            </div>
          </div>

          <div class="navsection">
            Calendars:
            <div class="navsubsection">
              <div class="navitem">
                <a href="livecalendar.html">Interactive</a>
              </div>
              <div class="navitem">
                <a href="/calendars/">Monthly</a>
              </div>
              <div class="navitem">
                <a href="/pdfs/">Printable</a>
              </div>
            </div>
          </div>

          <div class="navsection">
            <div class="navitem">
              <a href="/transit/">Take Public Transit to Dances!</a>
            </div>
          </div> <!-- end navsection -->
          <div class="navsection">
            <div class="navitem">
              Buy our CDs online
              <br />
              <a href="/events/SOTG/" title="Buy the Swinging on the Gate CD online"><img src="/graphics/SOTG_thumb.jpg"></a><br />
              <a href="/events/WaltzCD/" title="Buy the Waltzes Before Breakfast CD online"><img src="/graphics/WBB_thumb.jpg"></a><br />
              <a href="/events/WBB2/" title="Buy the More Waltzes Before Breakfast CD online"><img src="/graphics/WBB2-thumb.jpg"></a><br />
              <a href="/events/WBB3/" title="Buy the new Chocolates Before Breakfast CD online"><img src="/graphics/WBB3-thumb.jpg"></a>
              <br />
            </div>
          </div> <!-- end navsection -->
          <div class="navsection">
            <div class="navitem">
              <a href="/contact/">For More Information</a>
            </div>
            <div class="navitem">
              <a href="/donate/" title="Make a tax-deductible donation to BACDS"><img src="/graphics/Donate-button.png" align="center" border="0"></a>
            </div>
          </div>
        </nav>
      </div>
      <!-- ***************************** -->
      <!-- mission statement -->
      <!-- there are two of these in the HTML -->
      <!-- ***************************** -->
      <aside class="mission-statement desktop-only">
        <div class="mission-container">
          <div class="mission-title">BACDS</div>
          <div class="mission-text">
            <a href="/">Promoting, preserving, performing, and teaching<br>traditional English and American music &amp; dance</a>
          </div>
        </div>
      </aside>
    </div>

<!-- the main body gets injected here -->
<% content %>
<!-- ****** -->

  </div> <!-- end navbar-and-body -->

  <!-- ***************************** -->
  <!-- mission statement -->
  <!-- there are two of these in the HTML -->
  <!-- ***************************** -->
  <aside class="mission-statement mobile-only">
    <div class="mission-container">
      <div class="mission-title">BACDS</div>
      <div class="mission-text">
        <a href="/">Promoting, preserving, performing, and teaching<br>traditional English and American music &amp; dance</a>
      </div>
    </div>
  </aside>

  <!-- ***************************** -->
  <!-- footer -->
  <!-- ***************************** -->
  <footer>
    <p>
      Unless otherwise noted, layout and content Copyright &copy; 2002-2023, <a href="/">Bay Area Country Dance Society</a>.
      All rights reserved.
      <br>
      <a href="/contact/">Contact us</a> for more information about this site or BACDS.</a>
    </p>
  </footer>
<script>
  /* this emulates the details/summary tags, e.g.
    <div class="collapsible-title collapsible-closed">Buy Our CDs</div>
    <div class="collapsible-body">
      ...list of CDS...
    </div>
  With this approach using nextElementSibling, the two elements need to be
  right next to each other, with nothing in between */
  const collapsibleEls = document.getElementsByClassName("collapsible-title");
  for (let i = 0; i < collapsibleEls.length; i++) {
      /* in desktop view these are no-ops by virtue of the
       * .collapsible-body-hidden not having any styles for "@media (min-width:
       * 600px)"
       */
      collapsibleEls[i].addEventListener('click', function(event) {
          collapsibleEls[i].classList.toggle('collapsible-open');
          collapsibleEls[i].classList.toggle('collapsible-closed');
          const bodyNode = collapsibleEls[i].nextElementSibling;
          bodyNode.classList.toggle('collapsible-body-hidden');
      });
  }

  const promoButtons = document.getElementsByClassName("promo-button");
  Array.from(promoButtons).map(promoButton => {
      const promoId = promoButton.dataset.promoId;
      if (!promoId) {
          return;
      }
      const promo = document.getElementById(promoId);
      if (!promo) {
          console.log(`missing promo element ${promoId}, skipping`);
          return;
      }
      /* hide any other promos that were previously open */
      promoButton.addEventListener('click', function(event) {
          promo.classList.toggle('hidden');
          promos = document.getElementsByClassName('promo');
          Array.from(promos)
              .filter(promo => promo.id != promoButton.dataset.promoId)
              .filter(promo => !promo.classList.contains('hidden'))
              .map(   promo => promo.classList.add('hidden'));
      });
  })
</script>
</body>
</html>

